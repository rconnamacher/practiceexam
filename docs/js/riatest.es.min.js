/*Practice Test 0.0.5, (c) 2018 Richard Connamacher. All Rights Reserved.*/ (function(){'use strict';var g,aa="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},h;if("function"==typeof Object.setPrototypeOf)h=Object.setPrototypeOf;else{var k;a:{var ba={T:!0},m={};try{m.__proto__=ba;k=m.T;break a}catch(a){}k=!1}h=k?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var ca=h;
function n(a,b){a.prototype=aa(b.prototype);a.prototype.constructor=a;if(ca)ca(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.fa=b.prototype}var da="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},p="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;
function r(){r=function(){};p.Symbol||(p.Symbol=ea)}var ea=function(){var a=0;return function(b){return"jscomp_symbol_"+(b||"")+a++}}();function t(){r();var a=p.Symbol.iterator;a||(a=p.Symbol.iterator=p.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&da(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return fa(this)}});t=function(){}}function fa(a){var b=0;return ha(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})}
function ha(a){t();a={next:a};a[p.Symbol.iterator]=function(){return this};return a}function u(a){t();var b=a[Symbol.iterator];return b?b.call(a):fa(a)};function w(a,b){this.b=document.createElement(void 0===a?"div":a);this.b.className=void 0===b?"":b;this.l=[];this.title=""}g=w.prototype;g.display=function(a){this.refresh();for(var b=u(this.l),c=b.next();!c.done;c=b.next())c.value.refresh();a.appendChild(this.b)};function x(a,b,c){c=void 0===c?a.b:c;b.display(c);a.l.push(b)}function ia(a,b){a=a.l;for(var c=0,d=a.length;c<d;c++){var e=a[c];e===b&&(a.splice(c,1),e.remove())}}
g.remove=function(){var a=this.b.parentNode;a?a.removeChild(this.b):console.warn("Couldn't remove view because it has no parentNode:",this.b);this.m();a=u(this.l);for(var b=a.next();!b.done;b=a.next())b.value.m()};g.querySelector=function(a){return this.b.querySelector(a)};function y(a,b){a=a.b.querySelector(b);if(!a)throw Error("Required selector "+b+" not found");return a}g.querySelectorAll=function(a){return this.b.querySelectorAll(a)};
g.refresh=function(){var a=this.c();if(a){this.b.innerHTML=a;a=u(this.l);for(var b=a.next();!b.done;b=a.next())b.value.m();this.l=[]}this.h()};g.c=function(){};g.h=function(){};g.m=function(){};r();var z=Symbol("fields");function A(a){this.u={};this.w={};this.J();a&&this.load(a)}g=A.prototype;g.get=function(a,b,c){a=this.u[a];void 0!==b&&(a=a?b in a?a[b]:c:void 0);return a};g.set=function(a,b,c){var d=this.constructor[z][a];if(!d)throw Error("Unknown field "+a);d.F(b,a,c);void 0!==c?this.u[a][c]=b:this.u[a]=b;c=this.w[a];d=0;for(var e=c.length;d<e;d++){var f=c[d];f[1].call(f[0],b,a,this)}return b};g.append=function(a,b){this.set(a,b,this.u[a].length)};
function ja(a,b){a=a.w[b];if(!a)throw Error("Unknown field: "+b);return a}g.observe=function(a,b,c){ja(this,a).push([b,c])};g.unobserve=function(a,b,c){var d=ja(this,a);this.w[a]=d.filter(function(a){return!(a[0]===b&&(!c||a[1]==c))})};g.J=function(){var a=this.constructor[z],b;for(b in a){var c=a[b];this.w[b]=[];this.set(b,c.J())}};
g.load=function(a){for(var b in a){var c=this.constructor[z][b];if(c)try{this.set(b,c.parse(a[b],b))}catch(d){throw console.error("Error loading field "+b+": "+d),d;}else console.error("Unknown field: ",this.constructor.name,b)}};function B(a){var b=a.u;a=a.constructor[z];var c={},d;for(d in b)c[d]=a[d].I(b[d]);return c};function ka(a){var b=Error.call(this,a);this.message=b.message;"stack"in b&&(this.stack=b.stack);this.name="ValidationError";this.message=a;this.stack||(this.stack=Error(a).stack)}n(ka,Error);function C(a,b,c){if(!c)throw new ka(a+": "+b);};var la={min:function(a,b,c){C(c,"value "+b+" isn't over "+a,b>=a)},max:function(a,b,c){C(c,"value "+b+" isn't under "+a,b<=a)},ga:function(a,b,c){C(c,"value "+b+" isn't an integer",!a||0==b%1)},M:function(a,b,c){C(c,"value "+b+" isn't in "+a,-1!==a.indexOf(b))},ha:function(a,b,c){0==a&&C(c,"value can't be null or undefined",null!==b&&void 0!==b)}};function D(a,b){var c=typeof a;C("type","Type is not a valid type: "+c,"string"==c||"function"==c);this.type=a;this.H=b||{}}
D.prototype.F=function(a,b){ma(this,a,b)};function ma(a,b,c){if(void 0===b)debugger;var d=a.type,e=typeof d;a=a.H;switch(e){case "string":C(c,"Value is not a "+d,typeof b===d);break;case "function":C(c,"Value is not a "+d.name,null===b||b instanceof d);break;default:throw Error("Unsupported type of type: "+e);}for(var f in a)if(f in la)la[f](a[f],b,c)}D.prototype.I=function(a){return"function"==typeof this.type?a?B(a):null:a};
D.prototype.parse=function(a,b){var c=this.type,d=typeof c;switch(d){case "string":return ma(this,a,b),a;case "function":return a?c.fromJSON?c.fromJSON(a):new c(a):null;default:throw Error("Unknown value type: "+d);}};D.prototype.J=function(){var a=this.type,b=this.H;if(void 0!==b.default)return b.default;if(b.M)return b.M[0];if("string"==typeof a){b={number:0,string:"","boolean":!1};if(!(a in b))throw Error("Unknown type: "+a);return b[a]}return new a};var na={ca:function(a,b,c){b=b.length;C(c,"Array length "+b+" is under "+a,b>=a)},ba:function(a,b,c){b=b.length;C(c,"Array length "+b+" is over "+a,b<=a)},count:function(a,b,c){this.ca(a,b,c);this.ba(a,b,c)}};function E(a,b){b||(b=[]);b.default||(b.default=[]);D.call(this,a,b)}n(E,D);
E.prototype.F=function(a,b,c){if(void 0!==c)C(b,"Key must be an integer","number"==typeof c&&0===c%1),D.prototype.F.call(this,a,b+"["+c+"]");else{C(b,"Value must be an array",a instanceof Array);c=this.H;for(var d in c)if(d in na)na[d](c[d],a,b);d=0;for(c=a.length;d<c;d++)D.prototype.F.call(this,a[d],b+"["+d+"]")}};E.prototype.I=function(a){for(var b=[],c=0,d=a.length;c<d;c++)b[c]=D.prototype.I.call(this,a[c]);return b};
E.prototype.parse=function(a,b){var c=[];C(b,"value is not an array",a instanceof Array);for(var d=0,e=a.length;d<e;d++)c[d]=D.prototype.parse.call(this,a[d],b);return c};function oa(a,b){if(a.hasOwnProperty(z))var c=a[z];else c=(a.fa||Object.getPrototypeOf(a.prototype)).constructor,c=Object.create(c[z]||{}),a[z]=c;a=c;for(var d in b)a[d]=b[d]}
function pa(a,b){function c(a){return function(){return this.get(a)}}function d(a){return function(b){return this.set(a,b)}}if(!(a.prototype instanceof A))throw new TypeError("Not a Model: "+a.name);var e={},f={},l;for(l in b){var q=b[l],v=q[0];q=q[1];if(!v)throw new TypeError("Field name is missing");if(!q)throw new TypeError("Field definition is missing");e[v]=q;f[l]={enumerable:!0,configurable:!0,get:c(v),set:d(v)}}oa(a,e);Object.defineProperties(a.prototype,f)}
function F(){return new D("string",void 0)};function G(a){A.call(this,a)}n(G,A);pa(G,{o:["question",F()],s:["answer",F()],i:["incorrectAnswers",new E("string",void 0)],C:["notes",F()]});function H(a){A.call(this,a)}n(H,A);pa(H,{f:["questions",new E(G,void 0)]});function I(){w.call(this,"div","locale-selector action select")}n(I,w);I.prototype.c=function(){var a={"en-us":"\ud83c\uddfa\ud83c\uddf8 US English",es:"\ud83c\uddea\ud83c\uddf8 Español"};return'<span aria-hidden="true">'+a.es.split(" ")[0]+'</span>\n            <select id="lang_selector" aria-hidden="false" aria-label="Idioma">'+Object.keys(a).map(function(b){return'<option value="'+b+'" '+("es"===b?"selected":"")+">"+a[b]+"</option>"}).join("")+"\n            </select>"};
I.prototype.h=function(){var a=y(this,"select");a.addEventListener("change",function(){var b=a.value;b&&(location.pathname=location.pathname.replace(/[^/]*$/,"en-us"===b?"":"index-"+b+".html"))})};function J(a){w.call(this,"section","page homepage");this.a=a}n(J,w);J.prototype.c=function(){return'\n            <header>\n                <h2>Examen de práctica de Ria</h2>\n                <div class="actions"></div>\n            </header>\n            <main>\n                <p><a aria-role="button" class="button button-take-test'+(this.a.f.length?"":" disabled")+'" href="#taketest/5">Tomar examen</a>\n                    ( <input type="number" class="num-questions" value="5"> Preguntas)</p>\n                <p><a aria-role="button" class="button" href="#edit">Editar banco de preguntas</a></p>\n            </main>\n        '};
J.prototype.h=function(){var a=y(this,"input.num-questions"),b=y(this,"a.button-take-test");a.addEventListener("input",function(){b.href="#taketest/"+a.value});var c=y(this,"header div.actions");x(this,new I,c)};var K=1;function qa(a){for(var b=[],c=0,d=a.length;c<d;c++)b.splice(Math.floor(Math.random()*(c+1)),0,a[c]);return b};function L(a){return a.replace(/[&<>"']/g,function(a){return{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}[a]})};function M(a){w.call(this,"section","page take-test");this.f=a;this.L=[]}n(M,w);M.prototype.c=function(){return"\n            <header><h2>"+("Prueba de muestra: "+this.f.length+" preguntas")+'</h2></header>\n            <main class="test-questions"></main>\n            <footer>\n                <a class="button button-grade-test">Calificar la prueba</a>\n                <span class="test-results"></span>\n            </footer>\n        '};
M.prototype.h=function(){this.L=[];for(var a=y(this,"main.test-questions"),b=0,c=u(this.f),d=c.next();!d.done;d=c.next())d=new N(d.value,b++),x(this,d,a),this.L.push(d);y(this,"a.button.button-grade-test").addEventListener("click",this.Z.bind(this))};
M.prototype.Z=function(){for(var a=0,b=this.f.length,c=u(this.L),d=c.next();!d.done;d=c.next()){d=d.value;for(var e=d.a,f=u(d.querySelectorAll("li")),l=f.next();!l.done;l=f.next())l.value.classList.remove("incorrect","correct");e=(f=y(d,"input:checked"))&&f.value===e.s;f&&f.parentElement.classList.add(e?"correct":"incorrect");y(d,".notes").style.display=e?"none":"block";a+=e?1:0}c=Math.round(100*a/b);y(this,".test-results").textContent=a+" respuestas correctas de "+b+" preguntas ("+c+"%)"};
function N(a,b){w.call(this,"section","question");this.a=a;this.index=b}n(N,w);
N.prototype.c=function(){var a=this.a,b=qa(a.i.concat([a.s])),c="question-"+this.index,d=0,e;return'\n            <h3 class="question '+c+'">'+(this.index+1)+". "+a.o+'</h3>\n            <ol class="answers" type="A">\n                '+b.map(function(a){return e=c+"-answer-"+ ++d,'\n                        <li>\n                            <input type="radio" name="'+c+'" value="'+L(a)+'" id="'+e+'"\n                            ><label for="'+e+'">'+L(a)+"</label>\n                        </li>\n                    "}).join("")+
'\n            </ol>\n            <div class="notes" style="display: none">'+L(a.C)+"</div>\n        "};function O(a){w.call(this,"section","page edit-question");this.a=a;a=a.o;20<a.length&&(a=a.substr(17)+"…");this.title="Editar pregunta: "+a;this.K=0;this.D=null}n(O,w);
O.prototype.c=function(){return'\n            <header>\n                <h2>Editar pregunta</h2>\n            </header>\n            <main>\n                <div class="field textarea question">\n                    <label for="question-'+K++ +'">Pregunta: </label>\n                    <textarea id="question-'+K+'"></textarea>\n                </div>\n                <div class="field text correct-answer">\n                    <label for="answer-'+K++ +'">Respuesta: </label>\n                    <input id="answer-'+
K+'" type="text">\n                </div>\n                <div class="incorrect-answers"></div>\n                <div class="field textarea notes">\n                    <label for="notes-'+K++ +'">Notas: </label>\n                    <textarea id="notes-'+K+'"></textarea>\n                </div>\n                <div class="actions"><a class="button save">Completar</a></div>\n        </main>\n        '};
O.prototype.h=function(){var a=this,b=this.a,c=y(this,".question textarea"),d=y(this,".correct-answer input"),e=y(this,".button.save"),f=y(this,".notes textarea");b.i=b.i.filter(Boolean);c.value=b.o||"";d.value=b.s||"";f.value=b.C||"";c.addEventListener("input",function(){b.o=c.value});d.addEventListener("input",function(){b.s=d.value});f.addEventListener("input",function(){b.C=f.value});e.addEventListener("click",function(){a.D&&a.D.call(null)});this.$=this.b.querySelector(".incorrect-answers");
this.K=0;e=u(b.i);for(var l=e.next();!l.done;l=e.next())P(this,l.value);P(this)};O.prototype.m=function(){var a=this.a;a.i=a.i.filter(Boolean)};
function P(a,b){b=void 0===b?"":b;var c=a.a,d=document.createElement("div");d.className="field text incorrect-answer";d.innerHTML='\n            <label for="answer-'+K++ +'">Respuesta incorrecta: </label>\n            <input id="answer-'+K+'" type="text">\n        ';var e=a.K++,f=d.querySelector("input");b&&(f.value=b);f.addEventListener("input",function(){(c.i[e]=f.value)&&e==a.K-1&&!c.i.some(function(a){return!a})&&P(a)});a.$.appendChild(d)};function Q(a){a=void 0===a?"":a;w.call(this,"div","modal-dialog"+(a&&" "+a));this.onclose=null}n(Q,w);Q.prototype.R=function(a){return"<section>"+a+"</section>"};Q.prototype.close=function(){this.onclose&&this.onclose.call(null)};function R(a){Q.call(this);this.a=a;this.B=null}n(R,Q);R.prototype.c=function(){return Q.prototype.R.call(this,'\n            <header>\n                <h3>Seleccionar archivo para importar:</h3>\n            </header>\n            <main>\n                <div><input type="file" name="import" accept=".json"></div>\n                <p><em>Esto reemplazará todas las preguntas abiertas con las del archivo.</em></p>\n                <div class="alert error hidden"></div>\n            </main>\n            <footer>\n                <a class="button cancel-button">Cancelar</a>\n                <a class="button load-button disabled">Importar</a>\n            </footer>\n        ')};
R.prototype.h=function(){var a=this,b=y(this,"a.button.cancel-button"),c=y(this,"input[type=file]"),d=y(this,"a.button.load-button");b.addEventListener("click",this.close.bind(this));c.addEventListener("change",this.Y.bind(this),!1);d.addEventListener("click",function(){a.B&&(a.a.set("questions",a.B.get("questions")),a.close())})};
R.prototype.Y=function(a){var b=this;a.preventDefault();a.stopPropagation();this.B=null;var c=a.target.files[0],d=y(this,"div.alert.error"),e=y(this,"a.button.load-button");e.classList.add("disabled");d.classList.add("hidden");d.textContent="";if(c){var f=new FileReader;f.onload=function(){try{var a=JSON.parse(f.result),q=new H(a);q.f.length&&(b.B=q,e.classList.remove("disabled"))}catch(v){d.textContent="No se pudo leer el archivo "+c.name,d.classList.remove("hidden")}};f.onerror=function(){d.textContent=
"Ocurrió un error al abrir el archivo";d.classList.remove("hidden")};f.readAsText(c)}};function S(a){Q.call(this);this.a=a}n(S,Q);S.prototype.c=function(){return Q.prototype.R.call(this,'\n            <header>\n                <h3>Exportar preguntas</h3>\n            </header>\n            <main>\n                <div><label for="file_name_input">Nombre del archivo: </label><input type="text" id="file_name_input" value="Questions.json"></div>\n            </main>\n            <footer>\n                <a class="button cancel-button">Cancelar</a>\n                <a class="button save-button disabled">Guardar</a>\n            </footer>\n        ')};
S.prototype.h=function(){function a(){var a=d.value;e.setAttribute("download",a);e.classList.toggle("disabled",!a)}var b=this,c=y(this,"a.button.cancel-button"),d=y(this,"input#file_name_input"),e=y(this,"a.button.save-button");c.addEventListener("click",this.close.bind(this));c=JSON.stringify(B(this.a),null,2);e.href="data:text/plain;charset=utf-8,"+encodeURIComponent(c);e.classList.remove("disabled");a();d.addEventListener("input",a);e.addEventListener("click",function(){setTimeout(function(){b.close()},
25)})};function T(a){w.call(this,"section","page edit-test-bank responsive-toolbar");this.a=a;this.P=0;this.title="Todas las preguntas"}n(T,w);g=T.prototype;g.c=function(){return'\n            <header class="toolbar">\n                <h2>Todas las preguntas</h2>\n                <div class="actions">\n                    <a class="action add-action" href="#edit/new" title="Nueva pregunta" data-short-title="Nueva"></a>\n                    <a class="action save-action disabled" download="Questions.json" title="Guardar archivo" data-short-title="Guardar"></a>\n                    <a class="action load-action" title="Abrir archivo" data-short-title="Abrir"></a>\n                    <a class="action" href="#" title="Completar"></a>\n                </div>\n            </header>\n            <main>\n                <table class="edit-questions">\n                    <thead>\n                        <th class="number"></th>\n                        <th class="question">Pregunta</th>\n                        <th class="answer">Respuesta</th>\n                        <th class="incorrect-answers">Respuestas incorrectas</th>\n                        <th class="notes">Notas</th>\n                    </thead>\n                    <tbody></tbody>\n                </table>\n            </main>\n        '};
g.h=function(){var a=this;this.v();this.P=0;y(this,".actions a.add-action");for(var b=y(this,"table.edit-questions > tbody"),c=y(this,".actions a.save-action"),d=y(this,".actions a.load-action"),e=this.a,f=u(e.f),l=f.next();!l.done;l=f.next())l=new U(l.value,this.P++),x(this,l,b);JSON.stringify(B(e),null,2);c.classList.toggle("disabled",!e.f.length);c.addEventListener("click",this.ea.bind(this));d.addEventListener("click",this.aa.bind(this));e.observe("questions",this,function(){a.refresh()})};
g.m=function(){this.v()};g.v=function(){this.a.unobserve("questions",this)};g.ea=function(){var a=this,b=new S(this.a);x(this,b);b.onclose=function(){ia(a,b)}};g.aa=function(){var a=this,b=new R(this.a);x(this,b);b.onclose=function(){ia(a,b)}};function U(a,b){w.call(this,"tr","question");this.a=a;this.index=b}n(U,w);U.prototype.c=function(){return'\n            <th class="number">'+(this.index+1)+'</th>\n            <td class="question"></td>\n            <td class="answer" title="Respuesta: "></td>\n            <td class="incorrect-answers" title="Respuestas incorrectas: "></td>\n            <td class="notes" title="Notas: "></td>\n        '};
U.prototype.h=function(){function a(a){v.innerHTML="";for(var b=0,c=a.length;b<c;b++){var d=document.createElement("div");d.textContent=a[b];b<c-1&&(d.textContent+=",");v.appendChild(d)}}function b(a){ra.textContent=a}function c(a){q.textContent=a}function d(a){l.textContent=a}var e=this,f=this.a;this.v();this.b.addEventListener("click",function(){location.hash="#edit/"+(e.index+1)});var l=y(this,"td.question"),q=y(this,"td.answer"),v=y(this,"td.incorrect-answers"),ra=y(this,"td.notes");d(f.o);c(f.s);
a(f.i);b(f.C);f.observe("question",this,d);f.observe("answer",this,c);f.observe("incorrectAnswers",this,a);f.observe("notes",this,b)};U.prototype.m=function(){this.v()};U.prototype.v=function(){var a=this.a;a.unobserve("question",this);a.unobserve("answer",this);a.unobserve("incorrectAnswers",this)};function V(a){var b=this;this.S=a;this.G=function(){a:{var a=location.hash.substr(1),d,e=u(b.S);for(d=e.next();!d.done;d=e.next()){var f=d.value;if(d=f.pattern.exec(a)){f.j.apply(null,d);break a}}console.error("Unable to find handler for route "+a,b.S)}}}V.prototype.start=function(){window.addEventListener("hashchange",this.G);this.G()};V.prototype.stop=function(){window.removeEventListener("hashchange",this.G)};var sa={questions:[{question:"What is the meaning of Life, the Universe, and Everything?",answer:"Nobody knows because the Earth was blown up",incorrectAnswers:["42","Vogon poetry","Don’t panic"],notes:"42 is the answer to the question of the meaning of Life, the Universe, and Everything. But without the question – which nobody knows – it's meaningless."}]};function W(){w.call(this,"div","app");this.g=this.A=null;this.da=new V([{pattern:/^$/,j:this.W.bind(this)},{pattern:/^taketest$/,j:this.O.bind(this)},{pattern:/^taketest\/(\d+)$/,j:this.O.bind(this)},{pattern:/^edit$/,j:this.U.bind(this)},{pattern:/^edit\/(\d+)$/,j:this.V.bind(this)},{pattern:/^edit\/new$/,j:this.X.bind(this)},{pattern:/.*/,j:this.N.bind(this)}])}n(W,w);g=W.prototype;g.c=function(){return""};
function X(a,b,c){a.A&&(a.A.remove(),a.A=null);b=new b(c);b.display(a.b);a.A=b;document.title=b.title||"Examen de práctica";return b}g.W=function(){X(this,J,this.g)};g.O=function(a,b){b=parseInt(b,10)||5;a=qa(this.g.f).slice(0,b);X(this,M,a)};g.U=function(){X(this,T,this.g)};function Y(a){localStorage.setItem("questionStore",JSON.stringify(B(a.g)))}g.V=function(a,b){var c=this;(b=this.g.f[parseInt(b,10)-1])?X(this,O,b).D=function(){Y(c);location.hash="#edit"}:this.N(a)};
g.X=function(){var a=this,b=new G;X(this,O,b).D=function(){b.o&&a.g.append("questions",b);Y(a);location.hash="#edit"}};g.N=function(a){console.log("Will display 404: ",a)};var Z=new W;(function(a){a.g&&a.g.unobserve("questions",a);var b=new H,c=localStorage.getItem("questionStore")||JSON.stringify(sa);if(c)try{b.load(JSON.parse(c))}catch(d){console.error("Unable to parse save data: ",d)}b.observe("questions",a,function(){console.log("Application: observed update to questions field");Y(a)});a.g=b})(Z);Z.display(document.body);Z.da.start();}).call(this)
