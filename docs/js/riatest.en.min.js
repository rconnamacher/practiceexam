/*Practice Test 0.0.1, (c) 2018 Richard Connamacher. All Rights Reserved.*/ (function(){'use strict';var g,aa="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},h;if("function"==typeof Object.setPrototypeOf)h=Object.setPrototypeOf;else{var k;a:{var ba={S:!0},l={};try{l.__proto__=ba;k=l.S;break a}catch(a){}k=!1}h=k?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var m=h;
function p(a,b){a.prototype=aa(b.prototype);a.prototype.constructor=a;if(m)m(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.ea=b.prototype}var ca="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},q="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;
function r(){r=function(){};q.Symbol||(q.Symbol=da)}var da=function(){var a=0;return function(b){return"jscomp_symbol_"+(b||"")+a++}}();function u(){r();var a=q.Symbol.iterator;a||(a=q.Symbol.iterator=q.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&ca(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return v(this)}});u=function(){}}function v(a){var b=0;return ea(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})}
function ea(a){u();a={next:a};a[q.Symbol.iterator]=function(){return this};return a}function w(a){u();var b=a[Symbol.iterator];return b?b.call(a):v(a)};function x(a,b){this.b=document.createElement(void 0===a?"div":a);this.b.className=void 0===b?"":b;this.l=[];this.title=""}g=x.prototype;g.display=function(a){this.refresh();for(var b=w(this.l),c=b.next();!c.done;c=b.next())c.value.refresh();a.appendChild(this.b)};function y(a,b,c){c=void 0===c?a.b:c;b.display(c);a.l.push(b)}function z(a,b){a=a.l;for(var c=0,d=a.length;c<d;c++){var e=a[c];e===b&&(a.splice(c,1),e.remove())}}
g.remove=function(){var a=this.b.parentNode;a?a.removeChild(this.b):console.warn("Couldn't remove view because it has no parentNode:",this.b);this.m();a=w(this.l);for(var b=a.next();!b.done;b=a.next())b.value.m()};g.querySelector=function(a){return this.b.querySelector(a)};g.querySelectorAll=function(a){return this.b.querySelectorAll(a)};g.refresh=function(){var a=this.f();if(a){this.b.innerHTML=a;a=w(this.l);for(var b=a.next();!b.done;b=a.next())b.value.m();this.l=[]}this.i()};g.f=function(){};
g.i=function(){};g.m=function(){};r();var B=Symbol("fields");function C(a){this.u={};this.w={};this.I();a&&this.load(a)}g=C.prototype;g.get=function(a,b,c){a=this.u[a];void 0!==b&&(a=a?b in a?a[b]:c:void 0);return a};g.set=function(a,b,c){var d=this.constructor[B][a];if(!d)throw Error("Unknown field "+a);d.D(b,a,c);void 0!==c?this.u[a][c]=b:this.u[a]=b;c=this.w[a];d=0;for(var e=c.length;d<e;d++){var f=c[d];f[1].call(f[0],b,a,this)}return b};g.append=function(a,b){this.set(a,b,this.u[a].length)};
function D(a,b){a=a.w[b];if(!a)throw Error("Unknown field: "+b);return a}g.observe=function(a,b,c){D(this,a).push([b,c])};g.unobserve=function(a,b,c){var d=D(this,a);this.w[a]=d.filter(function(a){return!(a[0]===b&&(!c||a[1]==c))})};g.I=function(){var a=this.constructor[B],b;for(b in a){var c=a[b];this.w[b]=[];this.set(b,c.I())}};
g.load=function(a){for(var b in a){var c=this.constructor[B][b];if(c)try{this.set(b,c.parse(a[b],b))}catch(d){throw console.error("Error loading field "+b+": "+d),d;}else console.error("Unknown field: ",this.constructor.name,b)}};function E(a){var b=a.u;a=a.constructor[B];var c={},d;for(d in b)c[d]=a[d].H(b[d]);return c};function fa(a){var b=Error.call(this,a);this.message=b.message;"stack"in b&&(this.stack=b.stack);this.name="ValidationError";this.message=a;this.stack||(this.stack=Error(a).stack)}p(fa,Error);function F(a,b,c){if(!c)throw new fa(a+": "+b);};var ha={min:function(a,b,c){F(c,"value "+b+" isn't over "+a,b>=a)},max:function(a,b,c){F(c,"value "+b+" isn't under "+a,b<=a)},fa:function(a,b,c){F(c,"value "+b+" isn't an integer",!a||0==b%1)},L:function(a,b,c){F(c,"value "+b+" isn't in "+a,-1!==a.indexOf(b))},ga:function(a,b,c){0==a&&F(c,"value can't be null or undefined",null!==b&&void 0!==b)}};function G(a,b){var c=typeof a;F("type","Type is not a valid type: "+c,"string"==c||"function"==c);this.type=a;this.G=b||{}}
G.prototype.D=function(a,b){ia(this,a,b)};function ia(a,b,c){if(void 0===b)debugger;var d=a.type,e=typeof d;a=a.G;switch(e){case "string":F(c,"Value is not a "+d,typeof b===d);break;case "function":F(c,"Value is not a "+d.name,null===b||b instanceof d);break;default:throw Error("Unsupported type of type: "+e);}for(var f in a)if(f in ha)ha[f](a[f],b,c)}G.prototype.H=function(a){return"function"==typeof this.type?a?E(a):null:a};
G.prototype.parse=function(a,b){var c=this.type,d=typeof c;switch(d){case "string":return ia(this,a,b),a;case "function":return a?c.fromJSON?c.fromJSON(a):new c(a):null;default:throw Error("Unknown value type: "+d);}};G.prototype.I=function(){var a=this.type,b=this.G;if(void 0!==b.default)return b.default;if(b.L)return b.L[0];if("string"==typeof a){b={number:0,string:"","boolean":!1};if(!(a in b))throw Error("Unknown type: "+a);return b[a]}return new a};var ja={ba:function(a,b,c){b=b.length;F(c,"Array length "+b+" is under "+a,b>=a)},aa:function(a,b,c){b=b.length;F(c,"Array length "+b+" is over "+a,b<=a)},count:function(a,b,c){this.ba(a,b,c);this.aa(a,b,c)}};function H(a,b){b||(b=[]);b.default||(b.default=[]);G.call(this,a,b)}p(H,G);
H.prototype.D=function(a,b,c){if(void 0!==c)F(b,"Key must be an integer","number"==typeof c&&0===c%1),G.prototype.D.call(this,a,b+"["+c+"]");else{F(b,"Value must be an array",a instanceof Array);c=this.G;for(var d in c)if(d in ja)ja[d](c[d],a,b);d=0;for(c=a.length;d<c;d++)G.prototype.D.call(this,a[d],b+"["+d+"]")}};H.prototype.H=function(a){for(var b=[],c=0,d=a.length;c<d;c++)b[c]=G.prototype.H.call(this,a[c]);return b};
H.prototype.parse=function(a,b){var c=[];F(b,"value is not an array",a instanceof Array);for(var d=0,e=a.length;d<e;d++)c[d]=G.prototype.parse.call(this,a[d],b);return c};function ka(a,b){if(a.hasOwnProperty(B))var c=a[B];else c=(a.ea||Object.getPrototypeOf(a.prototype)).constructor,c=Object.create(c[B]||{}),a[B]=c;a=c;for(var d in b)a[d]=b[d]}
function la(a,b){function c(a){return function(){return this.get(a)}}function d(a){return function(b){return this.set(a,b)}}if(!(a.prototype instanceof C))throw new TypeError("Not a Model: "+a.name);var e={},f={},n;for(n in b){var t=b[n],A=t[0];t=t[1];if(!A)throw new TypeError("Field name is missing");if(!t)throw new TypeError("Field definition is missing");e[A]=t;f[n]={enumerable:!0,configurable:!0,get:c(A),set:d(A)}}ka(a,e);Object.defineProperties(a.prototype,f)};function I(a){C.call(this,a)}p(I,C);la(I,{o:["question",new G("string",void 0)],s:["answer",new G("string",void 0)],h:["incorrectAnswers",new H("string",void 0)]});function J(a){C.call(this,a)}p(J,C);la(J,{c:["questions",new H(I,void 0)]});function K(a){x.call(this,"section","page homepage");this.a=a}p(K,x);K.prototype.f=function(){return'\n            <header>\n                <h2>Ria Practice Exam</h2>\n            </header>\n            <main>\n                <p><a class="button button-take-test'+(this.a.c.length?"":" disabled")+'" href="#taketest/5">Take Sample Test</a> ( <input type="number" class="num-questions" value="5"> Questions)</p>\n                <p><a class="button" href="#edit">Edit Test Bank</a></p>\n            </main>\n        '};
K.prototype.i=function(){var a=this.querySelector("input.num-questions"),b=this.querySelector("a.button-take-test");a.addEventListener("input",function(){b.href="#taketest/"+a.value})};var L=1;function ma(a){for(var b=[],c=0,d=a.length;c<d;c++)b.splice(Math.floor(Math.random()*(c+1)),0,a[c]);return b};function M(a){x.call(this,"section","page take-test");this.c=a;this.K=[]}p(M,x);M.prototype.f=function(){return"\n            <header><h2>Sample Test: "+this.c.length+' Questions</h2></header>\n            <main class="test-questions"></main>\n            <footer>\n                <a class="button button-grade-test">Grade Test</a>\n                <span class="test-results"></span>\n            </footer>\n        '};
M.prototype.i=function(){this.K=[];for(var a=this.querySelector("main.test-questions"),b=0,c=w(this.c),d=c.next();!d.done;d=c.next())d=new N(d.value,b++),y(this,d,a),this.K.push(d);this.querySelector("a.button.button-grade-test").addEventListener("click",this.Y.bind(this))};
M.prototype.Y=function(){for(var a=0,b=this.c.length,c=w(this.K),d=c.next();!d.done;d=c.next()){d=d.value;for(var e=w(d.querySelectorAll("li")),f=e.next();!f.done;f=e.next())f.value.classList.remove("incorrect","correct");d=(e=d.querySelector("input:checked"))&&e.value===d.a.s;e&&e.parentNode.classList.add(d?"correct":"incorrect");a+=d?1:0}this.querySelector(".test-results").textContent=a+" correct out of "+b+" ("+Math.round(100*a/b)+"%)"};
function N(a,b){x.call(this,"section","question");this.a=a;this.index=b}p(N,x);
N.prototype.f=function(){var a=this.a,b=ma(a.h.concat([a.s])),c="question-"+this.index,d=0,e;return'\n            <h3 class="question '+c+'">'+(this.index+1)+". "+a.o+'</h3>\n            <ol class="answers" type="A">\n                '+b.map(function(a){return e=c+"-answer-"+ ++d,'\n                        <li>\n                            <input type="radio" name="'+c+'" value="'+a+'" id="'+e+'"\n                            ><label for="'+e+'">'+a+"</label>\n                        </li>\n                    "}).join("")+
"\n            </ol>\n        "};function O(a){x.call(this,"section","page edit-question");this.a=a;a=a.o;20<a.length&&(a=a.substr("17\u2026"));this.title="Edit Question: "+a;this.J=0;this.C=null}p(O,x);
O.prototype.f=function(){return'\n            <header>\n                <h2>Edit Question</h2>\n            </header>\n            <main>\n                <div class="field textarea question">\n                    <label for="question-'+L++ +'">Question:</label>\n                    <textarea id="question-'+L+'"></textarea>\n                </div>\n                <div class="field text correct-answer">\n                    <label for="answer-'+L++ +'">Correct Answer:</label>\n                    <input id="answer-'+
L+'" type="text">\n                </div>\n                <div class="incorrect-answers"></div>\n                <div class="actions"><a class="button save">Done</a></div>\n            </main>\n        '};
O.prototype.i=function(){var a=this,b=this.a,c=this.querySelector(".question textarea"),d=this.querySelector(".correct-answer input"),e=this.querySelector(".button.save");b.h=b.h.filter(Boolean);c.value=b.o||"";d.value=b.s||"";c.addEventListener("input",function(){b.o=c.value});d.addEventListener("input",function(){b.s=d.value});e.addEventListener("click",function(){a.C&&a.C.call(null)});this.Z=this.b.querySelector(".incorrect-answers");this.J=0;e=w(b.h);for(var f=e.next();!f.done;f=e.next())P(this,
f.value);P(this)};O.prototype.m=function(){var a=this.a;a.h=a.h.filter(Boolean)};
function P(a,b){b=void 0===b?"":b;var c=a.a,d=document.createElement("div");d.className="field text incorrect-answer";d.innerHTML='\n            <label for="answer-'+L++ +'">Incorrect Answer:</label>\n            <input id="answer-'+L+'" type="text">\n        ';var e=a.J++,f=d.querySelector("input");b&&(f.value=b);f.addEventListener("input",function(){(c.h[e]=f.value)&&e==a.J-1&&!c.h.some(function(a){return!a})&&P(a)});a.Z.appendChild(d)};function Q(a){a=void 0===a?"":a;x.call(this,"div","modal-dialog"+(a&&" "+a));this.onclose=null}p(Q,x);Q.prototype.P=function(a){return"<section>"+a+"</section>"};Q.prototype.close=function(){this.onclose&&this.onclose.call(null)};function R(a){Q.call(this);this.a=a;this.B=null}p(R,Q);R.prototype.f=function(){return Q.prototype.P.call(this,'\n            <header>\n                <h3>Select file to import:</h3>\n            </header>\n            <main>\n                <div><input type="file" name="import" accept=".json"></div>\n                <p><em>This will replace all loaded questions with the one from the backup file.</em></p>\n                <div class="alert error hidden"></div>\n            </main>\n            <footer>\n                <a class="button cancel-button">Cancel</a>\n                <a class="button load-button disabled">Import</a>\n            </footer>\n        ')};
R.prototype.i=function(){var a=this,b=this.querySelector("input[type=file]"),c=this.querySelector("a.button.load-button");this.querySelector("a.button.cancel-button").addEventListener("click",this.close.bind(this));b.addEventListener("change",this.X.bind(this),!1);c.addEventListener("click",function(){a.B&&(a.a.set("questions",a.B.get("questions")),a.close())})};
R.prototype.X=function(a){var b=this;a.preventDefault();a.stopPropagation();this.B=null;var c=a.target.files[0],d=this.querySelector("div.alert.error"),e=this.querySelector("a.button.load-button");e.classList.add("disabled");d.classList.add("hidden");d.textContent="";if(c){var f=new FileReader;f.onload=function(){try{var a=JSON.parse(f.result),t=new J(a);t.c.length&&(b.B=t,e.classList.remove("disabled"))}catch(A){d.textContent="Couldn't read file "+c.name,d.classList.remove("hidden")}};f.onerror=
function(){d.textContent="An error happened loading the file";d.classList.remove("hidden")};f.readAsText(c)}};function S(a){Q.call(this);this.a=a}p(S,Q);S.prototype.f=function(){return Q.prototype.P.call(this,'\n            <header>\n                <h3>Export Questions</h3>\n            </header>\n            <main>\n                <div><label for="file_name_input">File Name:</label><input type="text" id="file_name_input" value="Questions.json"></div>\n            </main>\n            <footer>\n                <a class="button cancel-button">Cancel</a>\n                <a class="button save-button disabled">Save</a>\n            </footer>\n        ')};
S.prototype.i=function(){function a(){var a=c.value;d.setAttribute("download",a);d.classList.toggle("disabled",!a)}var b=this,c=this.querySelector("input#file_name_input"),d=this.querySelector("a.button.save-button");this.querySelector("a.button.cancel-button").addEventListener("click",this.close.bind(this));var e=JSON.stringify(E(this.a),null,2);d.href="data:text/plain;charset=utf-8,"+encodeURIComponent(e);d.classList.remove("disabled");a();c.addEventListener("input",a);d.addEventListener("click",
function(){setTimeout(function(){b.close()},25)})};function T(a){x.call(this,"section","page edit-test-bank");this.a=a;this.O=0;this.title="Edit Questions"}p(T,x);g=T.prototype;g.f=function(){return'\n            <header class="toolbar">\n                <h2>All Questions</h2>\n                <div class="actions">\n                    <a class="action add-action" href="#edit/new">New Question</a>\n                    <a class="action save-action disabled" download="Questions.json">Save Backup</a>\n                    <a class="action load-action">Import Backup</a>\n                    <a class="action" href="#">Done</a>\n                </div>\n            </header>\n            <main>\n                <table class="edit-questions">\n                    <thead>\n                        <th></th>\n                        <th class="question">Question</th>\n                        <th class="answer">Correct Answer</th>\n                        <th class="incorrect-answers">Incorrect Answers</th>\n                        <th></th>\n                    </thead>\n                    <tbody></tbody>\n                </table>\n            </main>\n        '};
g.i=function(){var a=this;this.v();this.O=0;for(var b=this.querySelector("table.edit-questions > tbody"),c=this.querySelector(".actions a.save-action"),d=this.querySelector(".actions a.load-action"),e=this.a,f=w(e.c),n=f.next();!n.done;n=f.next())n=new U(n.value,this.O++),y(this,n,b);JSON.stringify(E(e),null,2);c.classList.toggle("disabled",!e.c.length);c.addEventListener("click",this.da.bind(this));d.addEventListener("click",this.$.bind(this));e.observe("questions",this,function(){a.refresh()})};
g.m=function(){this.v()};g.v=function(){this.a.unobserve("questions",this)};g.da=function(){var a=this,b=new S(this.a);y(this,b);b.onclose=function(){z(a,b)}};g.$=function(){var a=this,b=new R(this.a);y(this,b);b.onclose=function(){z(a,b)}};function U(a,b){x.call(this,"tr","question");this.a=a;this.index=b}p(U,x);
U.prototype.f=function(){var a=this.index+1;return'\n            <th class="number">'+a+'</th>\n            <td class="question"></td>\n            <td class="answer"></td>\n            <td class="incorrect-answers"></td>\n            <td class="edit"><a class="button" href="#edit/'+a+'">Edit</a></td>\n        '};
U.prototype.i=function(){function a(a){n.innerHTML="";for(var b=0,c=a.length;b<c;b++){var d=document.createElement("div");d.textContent=a[b];b<c-1&&(d.textContent+=",");n.appendChild(d)}}function b(a){f.textContent=a}function c(a){e.textContent=a}var d=this.a;this.v();var e=this.querySelector("td.question"),f=this.querySelector("td.answer"),n=this.querySelector("td.incorrect-answers");c(d.o);b(d.s);a(d.h);d.observe("question",this,c);d.observe("answer",this,b);d.observe("incorrectAnswers",this,a)};
U.prototype.m=function(){this.v()};U.prototype.v=function(){var a=this.a;a.unobserve("question",this);a.unobserve("answer",this);a.unobserve("incorrectAnswers",this)};function V(a){var b=this;this.R=a;this.F=function(){a:{var a=location.hash.substr(1),d,e=w(b.R);for(d=e.next();!d.done;d=e.next()){var f=d.value;if(d=f.pattern.exec(a)){f.j.apply(null,d);break a}}console.error("Unable to find handler for route "+a,b.R)}}}V.prototype.start=function(){window.addEventListener("hashchange",this.F);this.F()};V.prototype.stop=function(){window.removeEventListener("hashchange",this.F)};function W(){x.call(this,"div","app");this.g=this.A=null;this.ca=new V([{pattern:/^$/,j:this.V.bind(this)},{pattern:/^taketest$/,j:this.N.bind(this)},{pattern:/^taketest\/(\d+)$/,j:this.N.bind(this)},{pattern:/^edit$/,j:this.T.bind(this)},{pattern:/^edit\/(\d+)$/,j:this.U.bind(this)},{pattern:/^edit\/new$/,j:this.W.bind(this)},{pattern:/.*/,j:this.M.bind(this)}])}p(W,x);g=W.prototype;g.f=function(){return""};
function X(a,b,c){a.A&&(a.A.remove(),a.A=null);b=new b(c);b.display(a.b);a.A=b;document.title=b.title||"Test Taker";return b}g.V=function(){X(this,K,this.g)};g.N=function(a,b){b=parseInt(b,10)||5;a=ma(this.g.c).slice(0,b);X(this,M,a)};g.T=function(){X(this,T,this.g)};function Y(a){localStorage.setItem("questionStore",JSON.stringify(E(a.g)))}g.U=function(a,b){var c=this;(b=this.g.c[parseInt(b,10)-1])?X(this,O,b).C=function(){Y(c);location.hash="#edit"}:this.M(a)};
g.W=function(){var a=this,b=new I;X(this,O,b).C=function(){b.o&&a.g.append("questions",b);Y(a);location.hash="#edit"}};g.M=function(a){console.log("Will display 404: ",a)};var Z=new W;(function(a){a.g&&a.g.unobserve("questions",a);var b=new J,c=localStorage.getItem("questionStore");if(c)try{b.load(JSON.parse(c))}catch(d){console.error("Unable to parse save data: ",d)}b.observe("questions",a,function(){console.log("Application: observed update to questions field");Y(a)});a.g=b})(Z);Z.display(document.body);Z.ca.start();}).call(this)
