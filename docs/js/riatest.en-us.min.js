/*Practice Test 0.0.3, (c) 2018 Richard Connamacher. All Rights Reserved.*/ (function(){'use strict';var g,aa="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},k;if("function"==typeof Object.setPrototypeOf)k=Object.setPrototypeOf;else{var l;a:{var ba={T:!0},m={};try{m.__proto__=ba;l=m.T;break a}catch(a){}l=!1}k=l?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var n=k;
function q(a,b){a.prototype=aa(b.prototype);a.prototype.constructor=a;if(n)n(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.fa=b.prototype}var ca="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},r="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;
function t(){t=function(){};r.Symbol||(r.Symbol=da)}var da=function(){var a=0;return function(b){return"jscomp_symbol_"+(b||"")+a++}}();function v(){t();var a=r.Symbol.iterator;a||(a=r.Symbol.iterator=r.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&ca(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return w(this)}});v=function(){}}function w(a){var b=0;return ea(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})}
function ea(a){v();a={next:a};a[r.Symbol.iterator]=function(){return this};return a}function x(a){v();var b=a[Symbol.iterator];return b?b.call(a):w(a)};function y(a,b){this.b=document.createElement(void 0===a?"div":a);this.b.className=void 0===b?"":b;this.l=[];this.title=""}g=y.prototype;g.display=function(a){this.refresh();for(var b=x(this.l),c=b.next();!c.done;c=b.next())c.value.refresh();a.appendChild(this.b)};function z(a,b,c){c=void 0===c?a.b:c;b.display(c);a.l.push(b)}function fa(a,b){a=a.l;for(var c=0,d=a.length;c<d;c++){var e=a[c];e===b&&(a.splice(c,1),e.remove())}}
g.remove=function(){var a=this.b.parentNode;a?a.removeChild(this.b):console.warn("Couldn't remove view because it has no parentNode:",this.b);this.m();a=x(this.l);for(var b=a.next();!b.done;b=a.next())b.value.m()};g.querySelector=function(a){return this.b.querySelector(a)};g.querySelectorAll=function(a){return this.b.querySelectorAll(a)};g.refresh=function(){var a=this.f();if(a){this.b.innerHTML=a;a=x(this.l);for(var b=a.next();!b.done;b=a.next())b.value.m();this.l=[]}this.i()};g.f=function(){};
g.i=function(){};g.m=function(){};t();var A=Symbol("fields");function B(a){this.u={};this.w={};this.J();a&&this.load(a)}g=B.prototype;g.get=function(a,b,c){a=this.u[a];void 0!==b&&(a=a?b in a?a[b]:c:void 0);return a};g.set=function(a,b,c){var d=this.constructor[A][a];if(!d)throw Error("Unknown field "+a);d.F(b,a,c);void 0!==c?this.u[a][c]=b:this.u[a]=b;c=this.w[a];d=0;for(var e=c.length;d<e;d++){var f=c[d];f[1].call(f[0],b,a,this)}return b};g.append=function(a,b){this.set(a,b,this.u[a].length)};
function ha(a,b){a=a.w[b];if(!a)throw Error("Unknown field: "+b);return a}g.observe=function(a,b,c){ha(this,a).push([b,c])};g.unobserve=function(a,b,c){var d=ha(this,a);this.w[a]=d.filter(function(a){return!(a[0]===b&&(!c||a[1]==c))})};g.J=function(){var a=this.constructor[A],b;for(b in a){var c=a[b];this.w[b]=[];this.set(b,c.J())}};
g.load=function(a){for(var b in a){var c=this.constructor[A][b];if(c)try{this.set(b,c.parse(a[b],b))}catch(d){throw console.error("Error loading field "+b+": "+d),d;}else console.error("Unknown field: ",this.constructor.name,b)}};function C(a){var b=a.u;a=a.constructor[A];var c={},d;for(d in b)c[d]=a[d].I(b[d]);return c};function ia(a){var b=Error.call(this,a);this.message=b.message;"stack"in b&&(this.stack=b.stack);this.name="ValidationError";this.message=a;this.stack||(this.stack=Error(a).stack)}q(ia,Error);function D(a,b,c){if(!c)throw new ia(a+": "+b);};var ja={min:function(a,b,c){D(c,"value "+b+" isn't over "+a,b>=a)},max:function(a,b,c){D(c,"value "+b+" isn't under "+a,b<=a)},ga:function(a,b,c){D(c,"value "+b+" isn't an integer",!a||0==b%1)},M:function(a,b,c){D(c,"value "+b+" isn't in "+a,-1!==a.indexOf(b))},ha:function(a,b,c){0==a&&D(c,"value can't be null or undefined",null!==b&&void 0!==b)}};function E(a,b){var c=typeof a;D("type","Type is not a valid type: "+c,"string"==c||"function"==c);this.type=a;this.H=b||{}}
E.prototype.F=function(a,b){ka(this,a,b)};function ka(a,b,c){if(void 0===b)debugger;var d=a.type,e=typeof d;a=a.H;switch(e){case "string":D(c,"Value is not a "+d,typeof b===d);break;case "function":D(c,"Value is not a "+d.name,null===b||b instanceof d);break;default:throw Error("Unsupported type of type: "+e);}for(var f in a)if(f in ja)ja[f](a[f],b,c)}E.prototype.I=function(a){return"function"==typeof this.type?a?C(a):null:a};
E.prototype.parse=function(a,b){var c=this.type,d=typeof c;switch(d){case "string":return ka(this,a,b),a;case "function":return a?c.fromJSON?c.fromJSON(a):new c(a):null;default:throw Error("Unknown value type: "+d);}};E.prototype.J=function(){var a=this.type,b=this.H;if(void 0!==b.default)return b.default;if(b.M)return b.M[0];if("string"==typeof a){b={number:0,string:"","boolean":!1};if(!(a in b))throw Error("Unknown type: "+a);return b[a]}return new a};var la={ca:function(a,b,c){b=b.length;D(c,"Array length "+b+" is under "+a,b>=a)},ba:function(a,b,c){b=b.length;D(c,"Array length "+b+" is over "+a,b<=a)},count:function(a,b,c){this.ca(a,b,c);this.ba(a,b,c)}};function F(a,b){b||(b=[]);b.default||(b.default=[]);E.call(this,a,b)}q(F,E);
F.prototype.F=function(a,b,c){if(void 0!==c)D(b,"Key must be an integer","number"==typeof c&&0===c%1),E.prototype.F.call(this,a,b+"["+c+"]");else{D(b,"Value must be an array",a instanceof Array);c=this.H;for(var d in c)if(d in la)la[d](c[d],a,b);d=0;for(c=a.length;d<c;d++)E.prototype.F.call(this,a[d],b+"["+d+"]")}};F.prototype.I=function(a){for(var b=[],c=0,d=a.length;c<d;c++)b[c]=E.prototype.I.call(this,a[c]);return b};
F.prototype.parse=function(a,b){var c=[];D(b,"value is not an array",a instanceof Array);for(var d=0,e=a.length;d<e;d++)c[d]=E.prototype.parse.call(this,a[d],b);return c};function ma(a,b){if(a.hasOwnProperty(A))var c=a[A];else c=(a.fa||Object.getPrototypeOf(a.prototype)).constructor,c=Object.create(c[A]||{}),a[A]=c;a=c;for(var d in b)a[d]=b[d]}
function na(a,b){function c(a){return function(){return this.get(a)}}function d(a){return function(b){return this.set(a,b)}}if(!(a.prototype instanceof B))throw new TypeError("Not a Model: "+a.name);var e={},f={},h;for(h in b){var p=b[h],u=p[0];p=p[1];if(!u)throw new TypeError("Field name is missing");if(!p)throw new TypeError("Field definition is missing");e[u]=p;f[h]={enumerable:!0,configurable:!0,get:c(u),set:d(u)}}ma(a,e);Object.defineProperties(a.prototype,f)}
function G(){return new E("string",void 0)};function H(a){B.call(this,a)}q(H,B);na(H,{o:["question",G()],s:["answer",G()],h:["incorrectAnswers",new F("string",void 0)],C:["notes",G()]});function I(a){B.call(this,a)}q(I,B);na(I,{c:["questions",new F(H,void 0)]});function J(a){y.call(this,"section","page homepage");this.a=a}q(J,y);J.prototype.f=function(){return'\n            <header>\n                <h2>Ria Practice Exam</h2>\n            </header>\n            <main>\n                <p><a class="button button-take-test'+(this.a.c.length?"":" disabled")+'" href="#taketest/5">Take Exam</a>\n                    ( <input type="number" class="num-questions" value="5"> Questions)</p>\n                <p><a class="button" href="#edit">Edit Test Bank</a></p>\n            </main>\n        '};
J.prototype.i=function(){var a=this.querySelector("input.num-questions"),b=this.querySelector("a.button-take-test");a.addEventListener("input",function(){b.href="#taketest/"+a.value})};var K=1;function oa(a){for(var b=[],c=0,d=a.length;c<d;c++)b.splice(Math.floor(Math.random()*(c+1)),0,a[c]);return b};function L(a){return a.replace(/[&<>"']/g,function(a){return{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}[a]})};function M(a){y.call(this,"section","page take-test");this.c=a;this.L=[]}q(M,y);M.prototype.f=function(){return"\n            <header><h2>"+("Sample Test: "+this.c.length+" Questions")+'</h2></header>\n            <main class="test-questions"></main>\n            <footer>\n                <a class="button button-grade-test">Grade Test</a>\n                <span class="test-results"></span>\n            </footer>\n        '};
M.prototype.i=function(){this.L=[];for(var a=this.querySelector("main.test-questions"),b=0,c=x(this.c),d=c.next();!d.done;d=c.next())d=new N(d.value,b++),z(this,d,a),this.L.push(d);this.querySelector("a.button.button-grade-test").addEventListener("click",this.Z.bind(this))};
M.prototype.Z=function(){for(var a=0,b=this.c.length,c=x(this.L),d=c.next();!d.done;d=c.next()){d=d.value;for(var e=d.a,f=x(d.querySelectorAll("li")),h=f.next();!h.done;h=f.next())h.value.classList.remove("incorrect","correct");e=(f=d.querySelector("input:checked"))&&f.value===e.s;f&&f.parentNode.classList.add(e?"correct":"incorrect");d.querySelector(".notes").style.display=e?"none":"block";a+=e?1:0}this.querySelector(".test-results").textContent=a+" correct out of "+b+" ("+Math.round(100*a/b)+"%)"};
function N(a,b){y.call(this,"section","question");this.a=a;this.index=b}q(N,y);
N.prototype.f=function(){var a=this.a,b=oa(a.h.concat([a.s])),c="question-"+this.index,d=0,e;return'\n            <h3 class="question '+c+'">'+(this.index+1)+". "+a.o+'</h3>\n            <ol class="answers" type="A">\n                '+b.map(function(a){return e=c+"-answer-"+ ++d,'\n                        <li>\n                            <input type="radio" name="'+c+'" value="'+L(a)+'" id="'+e+'"\n                            ><label for="'+e+'">'+L(a)+"</label>\n                        </li>\n                    "}).join("")+
'\n            </ol>\n            <div class="notes" style="display: none">'+L(a.C)+"</div>\n        "};function O(a){y.call(this,"section","page edit-question");this.a=a;a=a.o;20<a.length&&(a=a.substr("17\u2026"));this.title="Edit Question: "+a;this.K=0;this.D=null}q(O,y);
O.prototype.f=function(){return'\n            <header>\n                <h2>Edit Question</h2>\n            </header>\n            <main>\n                <div class="field textarea question">\n                    <label for="question-'+K++ +'">Question: </label>\n                    <textarea id="question-'+K+'"></textarea>\n                </div>\n                <div class="field text correct-answer">\n                    <label for="answer-'+K++ +'">Answer: </label>\n                    <input id="answer-'+
K+'" type="text">\n                </div>\n                <div class="incorrect-answers"></div>\n                <div class="field textarea notes">\n                    <label for="notes-'+K++ +'">Study Notes: </label>\n                    <textarea id="notes-'+K+'"></textarea>\n                </div>\n                <div class="actions"><a class="button save">Done</a></div>\n        </main>\n        '};
O.prototype.i=function(){var a=this,b=this.a,c=this.querySelector(".question textarea"),d=this.querySelector(".correct-answer input"),e=this.querySelector(".button.save"),f=this.querySelector(".notes textarea");b.h=b.h.filter(Boolean);c.value=b.o||"";d.value=b.s||"";f.value=b.C||"";c.addEventListener("input",function(){b.o=c.value});d.addEventListener("input",function(){b.s=d.value});f.addEventListener("input",function(){b.C=f.value});e.addEventListener("click",function(){a.D&&a.D.call(null)});this.$=
this.b.querySelector(".incorrect-answers");this.K=0;e=x(b.h);for(var h=e.next();!h.done;h=e.next())P(this,h.value);P(this)};O.prototype.m=function(){var a=this.a;a.h=a.h.filter(Boolean)};
function P(a,b){b=void 0===b?"":b;var c=a.a,d=document.createElement("div");d.className="field text incorrect-answer";d.innerHTML='\n            <label for="answer-'+K++ +'">Incorrect Answer: </label>\n            <input id="answer-'+K+'" type="text">\n        ';var e=a.K++,f=d.querySelector("input");b&&(f.value=b);f.addEventListener("input",function(){(c.h[e]=f.value)&&e==a.K-1&&!c.h.some(function(a){return!a})&&P(a)});a.$.appendChild(d)};function Q(a){a=void 0===a?"":a;y.call(this,"div","modal-dialog"+(a&&" "+a));this.onclose=null}q(Q,y);Q.prototype.R=function(a){return"<section>"+a+"</section>"};Q.prototype.close=function(){this.onclose&&this.onclose.call(null)};function R(a){Q.call(this);this.a=a;this.B=null}q(R,Q);R.prototype.f=function(){return Q.prototype.R.call(this,'\n            <header>\n                <h3>Select file to import:</h3>\n            </header>\n            <main>\n                <div><input type="file" name="import" accept=".json"></div>\n                <p><em>This will replace all loaded questions with the one from the backup file.</em></p>\n                <div class="alert error hidden"></div>\n            </main>\n            <footer>\n                <a class="button cancel-button">Cancel</a>\n                <a class="button load-button disabled">Import</a>\n            </footer>\n        ')};
R.prototype.i=function(){var a=this,b=this.querySelector("input[type=file]"),c=this.querySelector("a.button.load-button");this.querySelector("a.button.cancel-button").addEventListener("click",this.close.bind(this));b.addEventListener("change",this.Y.bind(this),!1);c.addEventListener("click",function(){a.B&&(a.a.set("questions",a.B.get("questions")),a.close())})};
R.prototype.Y=function(a){var b=this;a.preventDefault();a.stopPropagation();this.B=null;var c=a.target.files[0],d=this.querySelector("div.alert.error"),e=this.querySelector("a.button.load-button");e.classList.add("disabled");d.classList.add("hidden");d.textContent="";if(c){var f=new FileReader;f.onload=function(){try{var a=JSON.parse(f.result),p=new I(a);p.c.length&&(b.B=p,e.classList.remove("disabled"))}catch(u){d.textContent="Couldn't read file "+c.name,d.classList.remove("hidden")}};f.onerror=
function(){d.textContent="An error happened loading the file";d.classList.remove("hidden")};f.readAsText(c)}};function S(a){Q.call(this);this.a=a}q(S,Q);S.prototype.f=function(){return Q.prototype.R.call(this,'\n            <header>\n                <h3>Export Questions</h3>\n            </header>\n            <main>\n                <div><label for="file_name_input">File Name: </label><input type="text" id="file_name_input" value="Questions.json"></div>\n            </main>\n            <footer>\n                <a class="button cancel-button">Cancel</a>\n                <a class="button save-button disabled">Save</a>\n            </footer>\n        ')};
S.prototype.i=function(){function a(){var a=c.value;d.setAttribute("download",a);d.classList.toggle("disabled",!a)}var b=this,c=this.querySelector("input#file_name_input"),d=this.querySelector("a.button.save-button");this.querySelector("a.button.cancel-button").addEventListener("click",this.close.bind(this));var e=JSON.stringify(C(this.a),null,2);d.href="data:text/plain;charset=utf-8,"+encodeURIComponent(e);d.classList.remove("disabled");a();c.addEventListener("input",a);d.addEventListener("click",
function(){setTimeout(function(){b.close()},25)})};function T(a){y.call(this,"section","page edit-test-bank responsive-toolbar");this.a=a;this.P=0;this.title="All Questions"}q(T,y);g=T.prototype;g.f=function(){return'\n            <header class="toolbar">\n                <h2>All Questions</h2>\n                <div class="actions">\n                    <a class="action add-action" href="#edit/new" title="New Question" data-short-title="New"></a>\n                    <a class="action save-action disabled" download="Questions.json" title="Save Backup" data-short-title="Save"></a>\n                    <a class="action load-action" title="Load Backup" data-short-title="Load"></a>\n                    <a class="action" href="#" title="Done"></a>\n                </div>\n            </header>\n            <main>\n                <table class="edit-questions">\n                    <thead>\n                        <th class="number"></th>\n                        <th class="question">Question</th>\n                        <th class="answer">Answer</th>\n                        <th class="incorrect-answers">Incorrect Answers</th>\n                        <th class="notes">Study Notes</th>\n                    </thead>\n                    <tbody></tbody>\n                </table>\n            </main>\n        '};
g.i=function(){var a=this;this.v();this.P=0;for(var b=this.querySelector("table.edit-questions > tbody"),c=this.querySelector(".actions a.save-action"),d=this.querySelector(".actions a.load-action"),e=this.a,f=x(e.c),h=f.next();!h.done;h=f.next())h=new U(h.value,this.P++),z(this,h,b);JSON.stringify(C(e),null,2);c.classList.toggle("disabled",!e.c.length);c.addEventListener("click",this.ea.bind(this));d.addEventListener("click",this.aa.bind(this));e.observe("questions",this,function(){a.refresh()})};
g.m=function(){this.v()};g.v=function(){this.a.unobserve("questions",this)};g.ea=function(){var a=this,b=new S(this.a);z(this,b);b.onclose=function(){fa(a,b)}};g.aa=function(){var a=this,b=new R(this.a);z(this,b);b.onclose=function(){fa(a,b)}};function U(a,b){y.call(this,"tr","question");this.a=a;this.index=b}q(U,y);U.prototype.f=function(){return'\n            <th class="number">'+(this.index+1)+'</th>\n            <td class="question"></td>\n            <td class="answer" title="Answer: "></td>\n            <td class="incorrect-answers" title="Incorrect Answers: "></td>\n            <td class="notes" title="Study Notes: "></td>\n        '};
U.prototype.i=function(){function a(a){u.innerHTML="";for(var b=0,c=a.length;b<c;b++){var d=document.createElement("div");d.textContent=a[b];b<c-1&&(d.textContent+=",");u.appendChild(d)}}function b(a){pa.textContent=a}function c(a){p.textContent=a}function d(a){h.textContent=a}var e=this,f=this.a;this.v();this.b.addEventListener("click",function(){location.hash="#edit/"+(e.index+1)});var h=this.querySelector("td.question"),p=this.querySelector("td.answer"),u=this.querySelector("td.incorrect-answers"),
pa=this.querySelector("td.notes");d(f.o);c(f.s);a(f.h);b(f.C);f.observe("question",this,d);f.observe("answer",this,c);f.observe("incorrectAnswers",this,a);f.observe("notes",this,b)};U.prototype.m=function(){this.v()};U.prototype.v=function(){var a=this.a;a.unobserve("question",this);a.unobserve("answer",this);a.unobserve("incorrectAnswers",this)};function V(a){var b=this;this.S=a;this.G=function(){a:{var a=location.hash.substr(1),d,e=x(b.S);for(d=e.next();!d.done;d=e.next()){var f=d.value;if(d=f.pattern.exec(a)){f.j.apply(null,d);break a}}console.error("Unable to find handler for route "+a,b.S)}}}V.prototype.start=function(){window.addEventListener("hashchange",this.G);this.G()};V.prototype.stop=function(){window.removeEventListener("hashchange",this.G)};var qa={questions:[{question:"What is the meaning of Life, the Universe, and Everything?",answer:"Nobody knows because the Earth was blown up",incorrectAnswers:["42","Vogon poetry","Don\u2019t panic"],notes:"42 is the answer to the question of the meaning of Life, the Universe, and Everything. But without the question \u2013 which nobody knows \u2013 it's meaningless."}]};function W(){y.call(this,"div","app");this.g=this.A=null;this.da=new V([{pattern:/^$/,j:this.W.bind(this)},{pattern:/^taketest$/,j:this.O.bind(this)},{pattern:/^taketest\/(\d+)$/,j:this.O.bind(this)},{pattern:/^edit$/,j:this.U.bind(this)},{pattern:/^edit\/(\d+)$/,j:this.V.bind(this)},{pattern:/^edit\/new$/,j:this.X.bind(this)},{pattern:/.*/,j:this.N.bind(this)}])}q(W,y);g=W.prototype;g.f=function(){return""};
function X(a,b,c){a.A&&(a.A.remove(),a.A=null);b=new b(c);b.display(a.b);a.A=b;document.title=b.title||"Test Taker";return b}g.W=function(){X(this,J,this.g)};g.O=function(a,b){b=parseInt(b,10)||5;a=oa(this.g.c).slice(0,b);X(this,M,a)};g.U=function(){X(this,T,this.g)};function Y(a){localStorage.setItem("questionStore",JSON.stringify(C(a.g)))}g.V=function(a,b){var c=this;(b=this.g.c[parseInt(b,10)-1])?X(this,O,b).D=function(){Y(c);location.hash="#edit"}:this.N(a)};
g.X=function(){var a=this,b=new H;X(this,O,b).D=function(){b.o&&a.g.append("questions",b);Y(a);location.hash="#edit"}};g.N=function(a){console.log("Will display 404: ",a)};var Z=new W;(function(a){a.g&&a.g.unobserve("questions",a);var b=new I,c=localStorage.getItem("questionStore")||JSON.stringify(qa);if(c)try{b.load(JSON.parse(c))}catch(d){console.error("Unable to parse save data: ",d)}b.observe("questions",a,function(){console.log("Application: observed update to questions field");Y(a)});a.g=b})(Z);Z.display(document.body);Z.da.start();}).call(this)
